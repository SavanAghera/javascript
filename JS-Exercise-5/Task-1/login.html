<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <title>Task-1</title>

    <style>
        .sign_up{
            background-color:whitesmoke;
            padding: 3%;
            margin-top:20%;
            box-shadow: 1px 1px 10px black;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="container" style="max-width:500px;">
            <div class="sign_up">
                     <div class="row">
                        <div class="col-12 mb-2">
                            <input id="username" type="text" class="form-control" placeholder="Enter username"/>
                        </div>
                        <div class="col-12 mb-2">
                            <input id ="password"type="password" class="form-control" placeholder="enter password"/>
                        </div>
                        <div class="col-3 mt-2" >
                            <label><input type="radio"  name="User_type" value="Admin"/>&nbsp;Admin</label>
                        </div>

                        <div class="col-3 mt-2" >
                            <label><input type="radio"  name="User_type" value="User" checked/>&nbsp;User</label>
                        </div>
                        <div class="col-4"></div>
                        <div class="col-6 mt-3">
                            <a href="signup.html">Not have account SIGNUP</a>
                        </div>
                        <div class="col-3"></div>
                        <div class="col-2 mt-3">
                            <button onclick="login()" class="btn btn-primary">
                                Login
                            </button>
                        </div>
                     </div>
              
            </div>
        </div>
    </div>
    <script>
        if(localStorage.getItem('login')){
            localStorage.removeItem('login');
        }
       
        function login() {
            let uname = document.getElementById('username').value;
            let password = document.getElementById('password').value;
            let user_type = document.getElementsByName('User_type');
            let isTrue = true;

            if(uname == null || uname.length <3){
                alert("Please enter your username ,length must be greater then 3");
                isTrue = false;
            }
            if(password == null || password.length<5){
                alert("Please enter your password ,length must be greater then 5");
                isTrue = false;
            }
           
            if(isTrue){
            if(user_type[1].checked){
                const users = JSON.parse(localStorage.getItem("users"));
                let flag = true;
                for(let user in users){
                    console.log(user);
                    if(users[user].username === uname && users[user].password === password){
                        alert("login success");
                        const user_ = JSON.stringify([{username:uname, type:'user'}]);
                        window.localStorage.setItem("login",user_);
                        window.location = window.location = './user.html?username=' + uname;
                        flag = false;
                        break;
                    }
                }
                if(flag){
                    alert("enter valid user name and password");

                }
            }

            if(user_type[0].checked){
                const admins = JSON.parse(localStorage.getItem("admins"));
                let flag = true;
                for(admin in admins){
                    if(admins[admin].username === uname && admins[admin].password === password){
                        alert("login success");
                        localStorage.setItem("login",{username:uname, type:'admin'}); 
                        const user_ = JSON.stringify([{username:uname, type:'user'}]);
                        window.localStorage.setItem("login",user_);
                        window.location = window.location = './admin.html?username=' + uname;
                        flag = false;
                        break;
                    }
                }
                if(flag){
                    alert("enter valid user name and password");
                    return false;
                }
            }
        }   
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
</body>
</html>